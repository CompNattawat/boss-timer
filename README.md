# Boss Timer (Discord Only)

- Slash commands: `/boss add`, `/boss death`, `/boss reset-all`, `/boss table`
- Durable alerts with BullMQ (‚Äì10m + at spawn)
- Postgres + Redis required

## Deploy (Railway)

1) Create a project with **Postgres** and **Upstash Redis** add-ons.
2) Create two services from this repo:
   - **bot**: `SERVICE_ROLE=bot`
   - **worker**: `SERVICE_ROLE=worker`
3) Set the ENV (see `.env.example`).
4) Initialize database:
   - Run once on bot service console:
     ```
     npm run prisma:migrate
     npm run prisma:seed
     npm run register
     ```
5) In Discord channel, run `/boss table` once; copy the **Message ID** and set `DISCORD_SCHEDULE_MESSAGE_ID`.

## Notes on "Fixed-time bosses"
- See `prisma/fixed-times.json` for examples.
- You can fill real fixed-time rules later; code shows how to read them.


# Boss Timer (Discord Only)

‡∏ö‡∏≠‡∏ó Discord ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ **‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏î‡∏ö‡∏≠‡∏™**  
‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á **‡∏ö‡∏≠‡∏™‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ï‡∏≤‡∏°‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á** ‡πÅ‡∏•‡∏∞ **‡∏ö‡∏≠‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà**

---

## üìå Slash Commands

### 1) ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏™‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥ (Normal Respawn)

- **‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏≠‡∏™**
/boss add name:<‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏™> hours:<‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥> [game:<‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏Å‡∏°>]
‚ûú ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏≠‡∏™‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏∏‡∏Å `<‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á>` ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏¢  

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
/boss add name:‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏¥‡∏™ hours:29
/boss add name:‚Äú‡∏ã‡∏π‡πÇ‡∏û‡∏£‡πå‚Äù hours:62 game:L9

- **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏¢**
/boss death name:<‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏™> time:<‡πÄ‡∏ß‡∏•‡∏≤>
‚ûú ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏™ (‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢ Asia/Bangkok)  
‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `"HH:mm"` ‡∏´‡∏£‡∏∑‡∏≠ `"HH:mm DD/MM/YY"`

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
/boss death name:‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏¥‡∏™ time:‚Äú07:26‚Äù
/boss death name:‚Äú‡∏≠‡∏±‡∏™‡∏ï‡∏≤‚Äù time:‚Äú07:26 02/09/25‚Äù

- **‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ö‡∏≠‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î**
/boss reset-all
‚ûú ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏¢/‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô)

- **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏≠‡∏™**
/boss table
‚ûú ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏≠‡∏™‡πÉ‡∏ô‡πÅ‡∏ä‡∏ô‡πÅ‡∏ô‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

---

### 2) ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏™‡πÄ‡∏Å‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (Fixed-time Respawn)

‡∏ö‡∏≠‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `prisma/fixed-times.json`  
‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö **cron expression** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á `prisma/fixed-times.json`:

```json
{
"L9": [
  { "name": "‡∏ã‡∏≤‡∏ó‡∏¥‡∏£‡∏±‡∏™", "cron": ["0 16 * * 0", "30 10 * * 2"] },
  { "name": "‡∏ô‡∏¥‡∏ß‡πÇ‡∏£‡∏ó", "cron": ["0 18 * * 2", "30 10 * * 4"] },
  { "name": "‡∏Ñ‡∏•‡∏≤‡∏ß‡∏°‡∏ô‡∏ó‡∏¥‡∏™", "cron": ["30 10 * * 1", "0 18 * * 4"] },
  { "name": "‡πÑ‡∏≠‡πÄ‡∏°‡∏•", "cron": ["0 18 * * 1", "30 10 * * 3"] },
  { "name": "‡∏°‡∏¥‡∏•‡∏•‡∏≤‡∏ß‡∏µ", "cron": ["0 14 * * 6"] },
  { "name": "‡πÇ‡∏£‡πÄ‡∏î‡∏≠‡∏£‡∏¥‡∏Å", "cron": ["0 18 * * 5"] },
  { "name": "‡∏≠‡∏≠‡∏£‡πå‡∏Ñ‡∏¥‡∏î", "cron": ["0 20 * * 3", "0 20 * * 0"] },
  { "name": "‡∏à‡∏¥‡∏á‡∏Å‡∏≠‡∏£‡πå", "cron": ["0 16 * * 6"] },
  { "name": "‡πÑ‡∏ä‡∏ü‡∏•‡πá‡∏≠‡∏Ñ", "cron": ["0 21 * * 6"] }
]
}

# boss-timer
